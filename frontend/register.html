<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--ç¶²é æ¨™é¡Œ-->
    <title>GuaneiArk | å…±äº«ç¶“æ¿Ÿå¹³å°</title>
    <!--ç¶²é åœ–æ¨™-->
    <link rel="shortcut icon" href="image/icon.ico">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js">
    </script>
    <![endif]-->
    <!--GoogleIcon åœ–æ¨™ CDN-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!--Minified Jquery-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!--è‡ªå®šç¾©CSS-->
    <link rel="stylesheet" href="css/style.css">
  <body>
    <main>
      <!--å°è¦½åˆ—-->
      <nav class="nav-extended #00b0ff light-blue accent-3">
        <div class="nav-wrapper  container">
          <a href="index.html" class="brand-logo">GuaneiArk</a>
          <a href="JavaScript:void(0)" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
          <ul class="right hide-on-med-and-down level_1">
            <li><a href="member.html">ğŸ‘¤æœƒå“¡</a></li>
            <li><a href="event.html">ğŸ’¼å·®äº‹</a></li>
            <li><a href="notification.html">ğŸ””é€šçŸ¥</a></li>
            <li>
              <a class="waves-effect waves-light btn" href="login.html">ç™»å…¥</a>
            </li>
          </ul>
          <ul class="sidenav" id="mobile-demo">
            <li><a href="member.html">ğŸ‘¤æœƒå“¡</a></li>
            <li><a href="event.html">ğŸ’¼å·®äº‹</a></li>
            <li><a href="notification.html">ğŸ””é€šçŸ¥</a></li>
            <li>
              <a class="waves-effect waves-light btn" href="login.html">ç™»å…¥</a>
            </li>
          </ul>
        </div>
      </nav>
      <!--å…§å®¹-->
      <div class="container">
        <div class="row">
          <form class="textForm register">
            <div class="col s12 m8 offset-m2">
              <div class="card light-blue lighten-5">
                <div class="card-content grey-text">
                  <div class="row">
                    <div class="input-field col s12">
                      <input placeholder="" id="username" name="username" type="text" class="validate" minlength="1">
                      <label for="username">å¸³è™Ÿåç¨±</label>
                      <span class="helper-text" data-error="å¸³è™Ÿæœ‰èª¤" data-success=""></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input placeholder="" id="nickname" name="nickname" type="text" class="validate" minlength="1">
                      <label for="username">æš±ç¨±</label>
                      <span class="helper-text" data-error="æš±ç¨±ä¸å¾—ç‚ºç©º" data-success=""></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input placeholder="" id="email" name=="email" type="email" class="validate">
                      <label for="email">Email</label>
                      <span class="helper-text" data-error="ä¿¡ç®±æ ¼å¼ä¸æ­£ç¢º" data-success=""></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input placeholder="" id="password" name=="password" type="password" class="validate" minlength="8">
                      <label for="password">è«‹è¼¸å…¥å¯†ç¢¼(è«‹å¤šæ–¼8å€‹å­—å…ƒ)</label>
                      <span class="helper-text" data-error="å¯†ç¢¼ä¸å¾—ç‚ºç©º" data-success=""></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s12">
                      <input placeholder="" id="confirm_password" name=="password" type="password" class="validate" minlength="8">
                      <label for="password">è«‹å†æ¬¡è¼¸å…¥å¯†ç¢¼</label>
                      <span class="helper-text" data-error="å…©æ¬¡å¯†ç¢¼è¼¸å…¥ä¸ä¸€æ¨£ï¼Œè«‹ç¢ºèª" data-success=""></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="input-field col s3 offset-s9">
                      <button class="btn waves-effect waves-light" id="submit" type="submit">
                        è¨»å†Š<i class="material-icons right">send</i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </main>

    <!--ç½®åº•èªªæ˜-->
    <footer class="page-footer #00b0ff light-blue accent-3">
      <div class="container">
        <div class="row">
          <div class="col l6 s12">
            <h5 class="white-text">é—œæ–¼</h5>
            <p class="grey-text text-lighten-4">
              å»ºç«‹å°ç£ä¹‹æœå‹™å…±äº«å¹³å°ï¼Œ
              è®“ä¾›æ‡‰è€…æä¾›å¤šé¤˜å¯¦é«”ç‰©å“èˆ‡éå¯¦é«”æœå‹™è®“éœ€æ±‚è€…èƒ½å¤ é¸æ“‡ä½¿ç”¨ï¼Œ
              èƒ½ä½¿æ“æœ‰å¤šé¤˜è³‡æºä¸”é¡˜æ„å›é¥‹æ–¼ç¤¾æœƒçš„ä¾›æ‡‰è€…ï¼Œ
              æä¾›å¦‚æ•™è‚²ã€ç…§é¡§ã€å…±ä¹˜ã€ç§Ÿè³ƒæœå‹™ï¼Œ
              å»ºç«‹ä¾›æ‡‰è€…èˆ‡éœ€æ±‚è€…æºé€šçš„æ©‹æ¨‘ã€‚
            </p>
          </div>
          <div class="col l4 offset-l2 s12">
            <h5 class="white-text">å…¶ä»–è³‡è¨Š</h5>
            <ul>
              <li><a class="grey-text text-lighten-3" href="#!">å•é¡Œå›å ±</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
          Â© 2019 GuaneiArk
          <a class="grey-text text-lighten-4 right" href="#!">é€£ç•¥æˆ‘å€‘</a>
        </div>
      </div>
    </footer>

    <script>
      $(document).ready(function(){
        $(".sidenav").sidenav();

        /*
        //å¸³è™Ÿæª¢æŸ¥æ˜¯å¦é‡è¤‡
        $("#username").on("keyup", function(){
          if($(this).val() != ''){
            //alert("test");
            //$("#submit").removeClass("disabled");
          }else{
            $("#submit").addClass("disabled");
          }
        });

        //ä¿¡ç®±è¼¸å…¥æ˜¯å¦æ­£ç¢º
        $("#email").on("keyup", function(){
          if($(this).val() != ''){
            //alert("test");
            //$("#submit").removeClass("disabled");
          }else{
            $("#submit").addClass("disabled");
          }
        });
        */

        //ç•¶å¸³è™Ÿçš„input keyupçš„æ™‚å€™ï¼Œé€éajaxæª¢æŸ¥
      	$("#username").on("keyup", function(){
      		//å–å¾—è¼¸å…¥çš„å€¼
      		var keyin_value = $(this).val();
      		//ç•¶keyupçš„æ™‚å€™ï¼Œè£¡é¢çš„å€¼ä¸æ˜¯ç©ºå­—ä¸²çš„è©±ï¼Œå°±æª¢æŸ¥ã€‚
      		if(keyin_value != '')
      		{
      			//$.ajax æ˜¯ jQuery çš„æ–¹æ³•ï¼Œè£¡é¢ä½¿ç”¨çš„æ˜¯ç‰©ä»¶ã€‚
	      		$.ajax({
			        type : "POST",	//è¡¨å–®å‚³é€çš„æ–¹å¼ åŒ form çš„ method å±¬æ€§
			        url : "index.html",  //ç›®æ¨™çµ¦å“ªå€‹æª”æ¡ˆ åŒ form çš„ action å±¬æ€§
			        data : {	//ç‚ºè¦å‚³éå»çš„è³‡æ–™ï¼Œä½¿ç”¨ç‰©ä»¶æ–¹å¼å‘ˆç¾ï¼Œå› ç‚ºè®Šæ•¸keyå€¼ç‚ºè‹±æ–‡çš„é—œä¿‚ï¼Œæ‰€ä»¥ç”¨ç‰©ä»¶æ–¹å¼é€ã€‚ex: {name : "è¼¸å…¥çš„åå­—", password : "è¼¸å…¥çš„å¯†ç¢¼"}
			          n : $(this).val()	//ä»£è¡¨è¦å‚³ä¸€å€‹ n è®Šæ•¸å€¼ç‚ºï¼Œusername æ–‡å­—æ–¹å¡Šè£¡çš„å€¼
			        },
			        dataType : 'html' //è¨­å®šè©²ç¶²é å›æ‡‰çš„æœƒæ˜¯ html æ ¼å¼
			      }).done(function(data) {
			        //æˆåŠŸçš„æ™‚å€™
			        //console.log(data); //é€é console çœ‹å›å‚³çš„çµæœ
			        if(data == "yes")
			        {
			        	//å¦‚æœç‚º yes username æ–‡å­—æ–¹å¡Šçš„å¾©å…ƒç´ å…ˆç§»é™¤ has-error é¡åˆ¥ï¼Œå†åŠ å…¥ has-success é¡åˆ¥
			        	$("#username").removeClass("invalid")
			        }
			        else
			        {
			        	alert("å¸³è™Ÿæœ‰é‡è¤‡ï¼Œä¸å¯ä»¥è¨»å†Š");
			        	$("#username").addClass("invalid");
			        }

			      }).fail(function(jqXHR, textStatus, errorThrown) {
			      	//å¤±æ•—çš„æ™‚å€™
			      	alert("æœ‰éŒ¯èª¤ç”¢ç”Ÿï¼Œè«‹çœ‹ console log");
			        console.log(jqXHR.responseText);
			      });
      		}
      		else
      		{
      			//è‹¥ç‚ºç©ºå­—ä¸²ï¼Œå°±ç§»é™¤ has-error è·Ÿ has-success é¡åˆ¥
      			$("#username").removeClass("invalid")
      		}

      	});

        //é©—è­‰å¯†ç¢¼è¼¸å…¥æ˜¯å¦æ­£ç¢º
        $("#confirm_password").on("keyup", function(){
          if ($("#password").val() != $("#confirm_password").val()) {
            //$("#password").addClass("invalid");
            $("#confirm_password").addClass("invalid");
            //è‹¥å¯†ç¢¼éƒ½ä¸ä¸€æ¨£å°±è­¦å‘Šã€‚

            //return false;
          }else{
            $("#confirm_password").removeClass("invalid");
          }
        });

        $("form.register").on("submit" , function(){

          if($("#password").val() == $("#confirm_password").val() && $("#username").val() != '' && $("#password").val()!= '' && $("#nickname").val() != '' && $("#email").val()!= ''){
            $.ajax({
              type:"post",
              url:"index.html",
              data:{
                username:$("#username").val(),
                nickname:$("#nickname").val(),
                email:$("#email").val(),
                password:$("#password").val()
              },
              datatype:'html'//è¨­å®šç¶²é å›æ‡‰æ˜¯ html æ ¼å¼
            }).done(function(data){
              //æˆåŠŸ
              console.log(data);
              if(data == "yes"){
                //è¨»å†ŠæˆåŠŸ
                window.location.href ="index.html";
              }else{
                alert("ç™»å…¥å¤±æ•—,è«‹ç¢ºèªå¸³è™Ÿå¯†ç¢¼");
                //æ¸¬è©¦
                window.location.href ="index.html";
              }
            }).fail(function(jqXHR, textStatus, errorThrow){
              //å¤±æ•—
              alert("æœ‰éŒ¯èª¤ç”¢ç”Ÿï¼Œè«‹çœ‹ console log");
              console.log(jqXHR.responseText);
            });
          }else{
            if($("#username").val() == ''){
                $("#username").addClass("invalid");
            }
            if($("#password").val() == ''){
                $("#password").addClass("invalid");
            }
            if($("#password").val() == ''){
                $("#password").addClass("invalid");
            }
            if($("#nickname").val() == ''){
                $("#nickname").addClass("invalid");
            }
            if($("#email").val() == ''){
                $("#email").addClass("invalid");
            }
          }
          return false;
        });
      });
    </script>
  </body>
</html>

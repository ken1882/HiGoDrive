<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--網頁標題-->
    <title>GuaneiArk | 會員中心</title>
    <!--網頁圖標-->
    <link rel="shortcut icon" href="image/icon.ico">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js">
    </script>
    <![endif]-->
    <!--GoogleIcon 圖標 CDN-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!--Minified Jquery-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!--自定義CSS-->
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <main>
      <!--導覽列-->
      <nav class="nav-extended">
        <div class="nav-wrapper  #00b0ff light-blue accent-3">
          <div class="container">
            <a href="index.html" class="brand-logo">GuaneiArk</a>
            <a href="JavaScript:void(0)" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down level_1">
              <li class="active"><a href="member.html">👤會員</a></li>
              <li><a href="event.html">💼差事</a></li>
              <li><a href="notification.html">🔔通知</a></li>
              <li>
                <a class="waves-effect waves-light btn" href="login.html">登入</a>
              </li>
            </ul>

            <ul class="sidenav" id="mobile-demo">
              <li  class="active"><a href="member.html">👤會員</a></li>
              <li><a href="event.html">💼差事</a></li>
              <li><a href="notification.html">🔔通知</a></li>
              <li>
                <a class="waves-effect waves-light btn" href="login.html">登入</a>
              </li>
            </ul>
          </div>
        </div>

        <div class="nav-content #0091ea light-blue accent-4">
          <div class="container">
            <ul class="tabs tabs-transparent">
              <li class="tab"><a href="#accountManagement">帳戶管理</a></li>
              <li class="tab"><a href="#setting">通知設定</a></li>
              <li class="tab"><a href="#tutorial">使用教學</a></li>
            </ul>
          </div>
        </div>

      </nav>

      <!--內容-->
      <!--帳戶管理-->
      <div class="accountManagement" id="accountManagement">
        <div class="container">
          <table class="highlight centered responsive-table">
            <thead>
              <tr>
                <th>帳號暱稱</th>
                <th>信箱</th>
                <th>已提出差事</th>
                <th>已申請差事</th>
                <th></th>
              </tr>
            </thead>

            <tbody>
              <tr>
                <td>Jonathan</td>
                <td>jonathan@mail.com</td>
                <td>3</td>
                <td>0</td>
                <td>
                  <a class="waves-effect waves-light btn-small green" href="memberChangeac.html" data-id="">帳號編輯</a>
                  <a class="waves-effect waves-light btn-small cyan" href="memberChangepw.html" data-id="">修改密碼</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!--系統設定-->
      <div class="setting" id="setting">
        <div class="container">
          <form class="setting" method="post">
            <table class="highlight centered responsive-table">
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>通知提示</td>
                  <td>
                    <div class="switch">
                     <label>
                       Off
                       <input type="checkbox" id="notificationSetting" value="Off">
                       <span class="lever"></span>
                       On
                     </label>
                   </div>
                  </td>
                </tr>
                <tr>
                  <td>訊息提示</td>
                  <td>
                    <div class="switch">
                     <label>
                       Off
                       <input type="checkbox" id="messageSetting" value="Off">
                       <span class="lever"></span>
                       On
                     </label>
                   </div>
                  </td>
                </tr>
                <tr>
                  <td>服務提示</td>
                  <td>
                    <div class="switch">
                     <label>
                       Off
                       <input type="checkbox" id="serviceSetting" value="Off">
                       <span class="lever"></span>
                       On
                     </label>
                   </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="row">
              <div class="input-field col s2 offset-s10">
                <button class="btn waves-effect waves-light" id="submit" type="submit">
                  確認修改
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!--使用教學-->
      <div class="tutorial" id="tutorial">
        <div class="container">
          <div class="row">
            <div class="col s12">
              <h4>差事提出教學</h4>
              <hr>
            </div>
            <div class="col s12">
              <h4>差事申請教學</h4>
              <hr>
            </div>
            <div class="col s12">
              <h4>其他教學</h4>
              <hr>
            </div>
            <div class="col s12">
              <div class="video-container">
                <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/Q8TXgCzxEnw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              </div>
            </div>
          </div>
        </div>
      </div>

    </main>

    <!--置底說明-->
    <footer class="page-footer #00b0ff light-blue accent-3">
      <div class="container">
        <div class="row">
          <div class="col l6 s12">
            <h5 class="white-text">關於</h5>
            <p class="grey-text text-lighten-4">
              建立台灣之服務共享平台，
              讓供應者提供多餘實體物品與非實體服務讓需求者能夠選擇使用，
              能使擁有多餘資源且願意回饋於社會的供應者，
              提供如教育、照顧、共乘、租賃服務，
              建立供應者與需求者溝通的橋樑。
            </p>
          </div>
          <div class="col l4 offset-l2 s12">
            <h5 class="white-text">其他資訊</h5>
            <ul>
              <li><a class="grey-text text-lighten-3" href="#!">問題回報</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
          © 2019 GuaneiArk
          <a class="grey-text text-lighten-4 right" href="#!">聯絡我們</a>
        </div>
      </div>
    </footer>

    <script>
      $(document).ready(function(){
        $(".sidenav").sidenav();
        $('.tabs').tabs();

        //通知選項邊更
        $("span.lever").on("click" ,function() {
          if($(this).siblings("input").val()=="On"){
            $(this).siblings("input").val("Off");
          }else{
            $(this).siblings("input").val("On");
          }
        })

        //通知設定
        $("form.setting").on("submit" , function(){
          $.ajax({
            type:"post",
            url:"member.html",//後端
            data:{
              notificationSetting:$("#notificationSetting").val(),
              messageSetting:$("#messageSetting").val(),
              serviceSetting:$("#serviceSetting").val()
            },
            datatype:'html'//設定網頁回應是 html 格式
          }).done(function(data){
            //成功
            console.log(data);
            if(data == "yes"){
              //設定成功
              alert("設定成功");
              window.location.href ="member.html";
            }else{
              alert("設定失敗,請確認帳號密碼");
              //測試
              window.location.href ="member.html";
              alert($("#notificationSetting").val()+$("#messageSetting").val()+$("#serviceSetting").val())
            }
          }).fail(function(jqXHR, textStatus, errorThrow){
            //失敗
            alert("有錯誤產生，請看 console log");
            console.log(jqXHR.responseText);
          });
          return false;
        });

      });
    </script>
  </body>
</html>

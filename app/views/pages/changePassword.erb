<% provide :page_title, "Change Password" %>

<div class="container">

  <div class="mt-4 mb-0 p-2">
    <a href="/user" class="list-group-item-action">
      <h2 class="text-center">HiGoDrive</h2>
    </a>
    <img id="motor" class="rounded mx-auto d-block" src=<%= image_url 'motorcycle-solid.svg' %> type="image/svg+xml" />
    <hr>
  </div>

  <%= form_tag("/api/v0/users/#{current_user.id}", method: 'PUT') do %>
    <div class="form-group">
      <label for="old_password">舊密碼</label>
      <input type="password" class="form-control" id="old_password" name="old_password" required>
    </div>
    <div class="form-group">
      <label for="password">新密碼</label>
      <input type="password" class="form-control" id="password" name="password" required>
    </div>
    <div class="form-group">
      <label for="password_confirmation">請再次輸入新密碼</label>
      <input type="password" class="form-control" id="password_confirmation" name="password_confirmation"
        required>
      <div class="invalid-feedback">
        請確認輸入密碼相同
      </div>
    </div>
    <br>
    <br>
    <div class="px-5 py-3">
      <button type="submit" class="btn btn-success btn-lg btn-block">確認更改</button>
    </div>
  <% end %>

</div>

<script>
  $("#password_confirmation").on("focusout", function (e) {
    if ($("#password_confirmation").val() != "") {
      if ($("#password").val() != $(this).val()) {
        $(this).addClass("is-invalid");
      } else {
        $(this).removeClass("is-invalid");
      }
    }
  });
</script>

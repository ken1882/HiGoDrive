<!DOCTYPE html>
<html lang="zh-TW" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>HiGoDrive</title>

  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js">
    </script>
    <![endif]-->

  <!--CSS-->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="css/style.css">

  <!--JS-->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

  <!--ICON-->
  <script src="https://kit.fontawesome.com/9b78fa3fff.js" crossorigin="anonymous"></script>
</head>

<body>
  <div class="container">

    <div class="mt-4 mb-0 p-2">
      <a href="index.html" class="list-group-item-action">
        <h2 class="text-center">HiGoDrive</h2>
      </a>
      <img id="motor" class="rounded mx-auto d-block" src="/assets/motorcycle-solid.svg" type="image/svg+xml" />
      <h5 class="text-center">現在就握起龍頭，開始賺取費用！！</h5>
      <hr>
    </div>


    <form action="login.html">
      <div class="form-group">
        <label for="driver_license">駕照正面照片</label>
        <input type="file" class="form-control-file" id="driver_license" name="driver_license" accept="image/*">
      </div>
      <div class="form-group">
        <label for="vehicle_license">行照正片照片</label>
        <input type="file" class="form-control-file" id="vehicle_license" name="vehicle_license" accept="image/*">
      </div>
      <div class="form-group">
        <label for="exterior">車身照片</label>
        <input type="file" class="form-control-file" id="exterior" name="exterior" accept="image/*">
      </div>
      <div class="form-group">
        <label for="palte">車牌</label>
        <input type="text" class="form-control" id="palte" name="palte" required>
      </div>
      <div class="form-group">
        <label for="module">車型</label>
        <input type="text" class="form-control" id="module" name="driver_license" required>
      </div>
      <br>
      <br>
      <div class="px-5 py-3">
        <button type="submit" class="btn btn-success btn-lg btn-block">申請</button>
      </div>
    </form>

    <div class="row">
      <div class="col-12 mt-5 mb-2">
        <span class="float-left">&copyHiGoDrive 2019</span>
        <a class="float-right" href="mailto:higodrive@sevice.mail.com">聯絡我們</a>
      </div>
    </div>
  </div>
  <script>
    $("document").ready(function () {
      var img = {
        "driver_license": "",
        "vehicle_license": "",
        "exterior": ""
      };
      $('input[type=file]').on("change", function () {

        var $files = $(this).get(0).files;

        if ($files.length) {

          // Reject big files
          if ($files[0].size > $(this).data("max-size") * 1024) {
            console.log("Please select a smaller file");
            return false;
          }

          // Begin file upload
          console.log("Uploading file to Imgur..");

          // Replace ctrlq with your own API key
          var apiUrl = 'https://api.imgur.com/3/image';
          var apiKey = '609d7822f8deef7';

          var settings = {
            async: false,
            crossDomain: true,
            processData: false,
            contentType: false,
            type: 'POST',
            url: apiUrl,
            headers: {
              Authorization: 'Client-ID ' + apiKey,
              Accept: 'application/json'
            },
            mimeType: 'multipart/form-data'
          };

          var formData = new FormData();
          formData.append("image", $files[0]);
          settings.data = formData;
          // console.log($(this).attr('id'))

          var tmp;
          // Response contains stringified JSON
          // Image URL available at response.data.link
          $.ajax(settings).done(function (response) {
            tmp = JSON.parse(response).data.link;
            console.log(JSON.parse(response).data.link); // imgur url
          });
          //console.log(tmp)
          img[$(this).attr('id')] = tmp;
          console.log(img)
        }
      });
    });
  </script>
</body>

</html>
